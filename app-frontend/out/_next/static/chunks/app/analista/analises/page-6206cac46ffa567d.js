(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[965],{15951:(e,a,t)=>{"use strict";t.d(a,{y:()=>l});var r=t(12115),s=t(23464),o=t(90240);let n="".concat((0,o.$)(),"/form"),l=()=>{let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)([]),[l,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)([]),[A,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[f,j]=(0,r.useState)([]),[v,x]=(0,r.useState)(!1),[N,S]=(0,r.useState)(null),w=()=>{let e=localStorage.getItem("token");return{headers:{Authorization:"Bearer ".concat(e)}}};async function b(){try{let e=await s.A.get("".concat(n,"/formularios/"),w());a(e.data),e.data.forEach(e=>{localStorage.setItem("formulario_".concat(e.id,"_total"),e.total.toString())})}catch(e){console.error("Erro ao buscar formul\xe1rios:",e)}}let E=async e=>{try{let a=await s.A.get("".concat(n,"/formularios/").concat(e,"/categorias/"),w());o(a.data)}catch(e){console.error("Erro ao buscar categorias:",e)}},y=async e=>{try{let a=await s.A.get("".concat(n,"/categorias/").concat(e,"/perguntas/"),w());i(a.data)}catch(e){console.error("Erro ao buscar quest\xf5es:",e)}},I=async(e,a)=>{try{var t;let e=localStorage.getItem("selectedFormularioId"),a=JSON.parse(localStorage.getItem("user")||"{}").id,r=await s.A.get("".concat(n,"/formularios/").concat(e,"/clientes/").concat(a,"/"),w()),o=JSON.parse(localStorage.getItem("formulariosRespondidos")||"{}");return o[e]={nome:null===(t=r.data.formulario)||void 0===t?void 0:t.nome,status:r.data.status,data:new Date().toISOString()},localStorage.setItem("formulariosRespondidos",JSON.stringify(o)),d(r.data),r.data}catch(e){return console.error("Erro ao buscar formul\xe1rio respondido:",e),null}},_=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rascunho";try{let t=localStorage.getItem("selectedFormularioId"),r=JSON.parse(localStorage.getItem("user")||"{}"),o=r.id,l={formulario:t,cliente:o,responsavel:r.id,status:a,respostas:e.map(e=>({pergunta:e.pergunta,politica:e.politica,pratica:e.pratica,info_complementar:e.info_complementar||"",anexos:e.anexos||null}))},i=await s.A.post("".concat(n,"/formularios/").concat(t,"/clientes/").concat(o,"/"),l,w());return await I(Number(t),o),i.data}catch(e){throw console.error("Erro ao salvar respostas:",e),e}},R=async(e,t)=>{try{let r=await s.A.patch("".concat(n,"/formularios/").concat(e,"/"),t,w());a(a=>a.map(a=>a.id===e?{...a,...r.data}:a))}catch(e){console.error("Erro ao atualizar formul\xe1rio:",e)}};(0,r.useEffect)(()=>{b()},[]);let k=async e=>{try{h(!0),g(null);let a=await s.A.get("".concat(n,"/clientes/").concat(e,"/formularios-em-andamento/"),w());m(a.data);let t=a.data.map(e=>({id:e.id,nome:e.formulario_nome,status:e.status,data:e.atualizado_em,progresso:e.progresso}));return localStorage.setItem("formulariosEmAndamento",JSON.stringify(t)),a.data}catch(e){throw console.error("Erro ao buscar formul\xe1rios em andamento:",e),g("Erro ao carregar formul\xe1rios em andamento"),e}finally{h(!1)}},B=async()=>{x(!0),S(null);try{let e=(await s.A.get("".concat(n,"/formularios-em-analise/"),w())).data,a=Object.entries(e).map(e=>{let[a,t]=e;return{id_formulario_respondido:parseInt(a),id_cliente:t.id_cliente,nome_cliente:t.nome_cliente,id_formulario:t.id_formulario,nome_formulario:t.nome_formulario}});return j(a),a}catch(e){return console.error("Erro ao buscar formul\xe1rios em an\xe1lise:",e),S("Erro ao carregar formul\xe1rios em an\xe1lise."),null}finally{x(!1)}};return(0,r.useEffect)(()=>{B()},[]),{formularios:e,categorias:t,perguntas:l,formularioRespondido:c,formulariosEmAnalise:f,loadingFormulariosEmAnalise:v,errorFormulariosEmAnalise:N,getFormularios:b,getCategoriasByFormulario:E,getQuestoesByCategoria:y,getFormularioRespondido:I,saveFormularioRespondido:_,updateFormularioById:R,getFormulariosEmAndamento:k,buscarFormulariosEmAnalise:B}}},17257:()=>{},32384:(e,a,t)=>{"use strict";t.d(a,{A:()=>A});var r=t(95155),s=t(66766);let o={src:"/projeto-future//_next/static/media/logo3.bd6a4934.png",height:406,width:422,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEXf39/Ewr/27uT29vbt4ND559H469vHx8b6+/vS09TNzs/24MbVzcPfzrjt2sH+8+Xn5+f28uzm3dHIQYkHAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAAJHRFWHREZXNjcmlwdGlvbgBodHRwOi8vd3d3LnBkZi10b29scy5jb21fEmayAAAAE3RFWHRBdXRob3IAUERGIFRvb2xzIEFHG893MAAAABF0RVh0VGl0bGUAUERGIENyZWF0b3JBXrwoAAAAPklEQVR4nBXLRxLAIAwAsQWMC6Yk/P+xmegu2jOsGE4bq6cYsHp1FSOuZ1UdhGR9Wxoxj3fdBjG33AJOlL9/QIsBxf42TxwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8};var n=t(12115),l=t(35695),i=t(10351),c=t(6874),d=t.n(c);t(90226),t(17257);var u=t(41478);let m=e=>{let{className:a}=e,[t,o]=(0,n.useState)("Home"),[i,c]=(0,n.useState)(2700),d=(0,l.useRouter)(),m=(0,l.usePathname)();(0,n.useEffect)(()=>{let e=m.split("/").filter(Boolean),a=e.length?e[e.length-1]:"Home";o(a.charAt(0).toUpperCase()+a.slice(1))},[m]);let A=()=>{c(900)};return(0,n.useEffect)(()=>{let e=()=>{A()};return window.addEventListener("mousemove",e),window.addEventListener("keydown",e),window.addEventListener("click",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e),window.removeEventListener("click",e)}},[]),(0,n.useEffect)(()=>{i<=0&&(localStorage.clear(),d.push("/login"));let e=setInterval(()=>{c(e=>e-1)},1e3);return()=>clearInterval(e)},[i,d]),(0,r.jsx)("header",{className:"header ".concat(a||""),role:"banner",children:(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"logo-container",children:[(0,r.jsx)(s.default,{src:u.A,alt:"Logo",width:50,height:50}),(0,r.jsxs)("div",{className:"titulo",children:[(0,r.jsx)("div",{className:"titulo-1",children:(0,r.jsxs)("span",{className:"system-name",children:["FS",(0,r.jsx)("span",{className:"orange",children:"3"}),"M"]})}),(0,r.jsx)("span",{className:"system-subname",children:"Future Security Maturity Monitoring & Management"})]})]}),(0,r.jsx)("div",{className:"header-spacer"})]})})},A=e=>{let{menuItems:a}=e,[t,c]=(0,n.useState)(!1),[u,A]=(0,n.useState)({name:"",type:""}),h=(0,l.useRouter)(),p=(0,l.usePathname)();return(0,n.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let a=JSON.parse(e);A({name:a.nome||"Usu\xe1rio",type:a.role||"Tipo n\xe3o definido"})}catch(e){console.error("Erro ao fazer parse do user no localStorage:",e)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{className:t?"collapsed-header":""}),(0,r.jsxs)("div",{className:"sidebar ".concat(t?"collapsed":""),role:"navigation","aria-label":"Menu lateral",children:[(0,r.jsx)("div",{className:"sidebar-header",children:(0,r.jsx)("button",{className:"menu-button",onClick:()=>c(!t),"aria-label":t?"Expandir menu":"Recolher menu","aria-expanded":!t,children:(0,r.jsx)(i.ND1,{size:24,"aria-hidden":"true"})})}),!t&&(0,r.jsxs)("div",{className:"user-section",children:[(0,r.jsx)(s.default,{src:o,alt:"Logo da Empresa",className:"user-avatar",width:60,height:60}),(0,r.jsx)("p",{className:"user-name",children:u.name}),(0,r.jsx)("p",{className:"user-type",children:u.type})]}),(0,r.jsx)("nav",{className:"menu-items",children:a.map((e,a)=>(0,r.jsxs)(d(),{href:e.path,className:"menu-link ".concat(p===e.path?"active":""),"aria-current":p===e.path?"page":void 0,children:[e.icon,!t&&(0,r.jsx)("span",{children:e.name})]},a))}),(0,r.jsx)("div",{className:"logout-section",children:(0,r.jsxs)("button",{className:"logout-button",onClick:()=>{localStorage.clear(),h.push("/login")},"aria-label":"Sair da conta",children:[(0,r.jsx)(i.QeK,{size:20,"aria-hidden":"true"}),!t&&(0,r.jsx)("span",{children:"Sair"})]})})]})]})}},41478:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r={src:"/projeto-future//_next/static/media/f3smlogo.15dc6b4d.png",height:1e3,width:1e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEVMaXH0iR72kyv7lCX7mjP4kCT5lij5kiT3jyX7lSf2iSf3jyL5lCf3jB75qFH3n0P3jiL2jSH2kyv4nkD4sWT9lSbkcvktAAAAFXRSTlMAJR1q/eAs+FfMDWDwLdzKqK+wvvt+FaB6AAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAPklEQVR4nC3LWQ6AMAhAwVcLpWg3F+5/VRPj/wyw12MD6GpiFXC/5miJLsPijkyxR2JFBpd5uiUo2vTDf38BRd8B6retxQUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},48283:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var r=t(95155),s=t(12115),o=t(15951),n=t(10351),l=t(32384);function i(){let{formulariosEmAnalise:e,loadingFormulariosEmAnalise:a,buscarFormulariosEmAnalise:t}=(0,o.y)(),[i,c]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{t()},[]),(0,r.jsxs)("div",{className:"app-container",children:[(0,r.jsx)(l.A,{menuItems:[{name:"Home",icon:(0,r.jsx)(n.V5Y,{size:20}),path:"/analista"},{name:"An\xe1lises",icon:(0,r.jsx)(n.vQY,{size:20}),path:"/analista/analises"},{name:"Relat\xf3rios",icon:(0,r.jsx)(n.jH2,{size:20}),path:"/analista/relatorios"}]}),(0,r.jsx)("main",{className:" flex main-content ".concat(i?"sidebar-open":"sidebar-collapsed"),children:(0,r.jsxs)("div",{className:"analises-section",children:[(0,r.jsx)("h2",{className:"section-title",children:"Avalia\xe7oes"}),a?(0,r.jsx)("p",{className:"loading-message",children:"Carregando avalia\xe7\xf5es..."}):0===e.length?(0,r.jsx)("p",{className:"empty-message",children:"Nenhuma avalia\xe7\xe3o pendente no momento."}):(0,r.jsx)("div",{className:"analises-grid",children:e.map(e=>(0,r.jsxs)("div",{className:"analise-card",onClick:()=>{localStorage.setItem("formularioRespondidoId",e.id_formulario_respondido.toString()),window.location.href="/analista/analises/analiseDetalhada/".concat(e.id_formulario_respondido)},children:[(0,r.jsxs)("div",{className:"card-header",children:[(0,r.jsx)(n.jH2,{className:"card-icon"}),(0,r.jsx)("h3",{className:"card-title",children:e.nome_formulario})]}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("p",{className:"card-info",children:[(0,r.jsx)("strong",{children:"Cliente:"})," ",e.nome_cliente]}),(0,r.jsxs)("p",{className:"card-id",children:["ID Respondido: ",e.id_formulario_respondido]})]})]},e.id_formulario_respondido))})]})})]})}},78522:(e,a,t)=>{Promise.resolve().then(t.bind(t,48283))},90226:()=>{},90240:(e,a,t)=>{"use strict";t.d(a,{$:()=>s});var r=t(49509);let s=()=>r.env.NEXT_PUBLIC_API_URL||"https://projeto-future-backend.onrender.com/"}},e=>{var a=a=>e(e.s=a);e.O(0,[156,844,733,874,464,441,684,358],()=>a(78522)),_N_E=e.O()}]);