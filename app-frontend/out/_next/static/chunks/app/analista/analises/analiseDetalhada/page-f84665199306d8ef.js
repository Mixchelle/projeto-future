(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[325],{17257:()=>{},24328:e=>{e.exports={containerPrincipal:"analises_containerPrincipal__dQvo0",conteudoCentralizado:"analises_conteudoCentralizado__VBlHV",larguraConteudo:"analises_larguraConteudo__utmla",tituloPagina:"analises_tituloPagina__KGuIa",card:"analises_card__nUE4p",tituloSecao:"analises_tituloSecao__bs_w1",textArea:"analises_textArea__411aj",botao:"analises_botao__6HPWK",tabelaestilo:"analises_tabelaestilo__HwcHZ",containerForm:"analises_containerForm__r1VJ8",formPersonalizado:"analises_formPersonalizado__0nkzL",fieldsetPersonalizado:"analises_fieldsetPersonalizado__n9KVH",botoesContainer:"analises_botoesContainer__rkYko",cancelarBtn:"analises_cancelarBtn__kS3r9",salvarBtn:"analises_salvarBtn__hg4fi",toggleBtn:"analises_toggleBtn__LEpj_",formulario:"analises_formulario__RiLWJ",gridDoisInputs:"analises_gridDoisInputs__ycjrj",btnExcluir:"analises_btnExcluir__P7vg1",btnRelatorio:"analises_btnRelatorio__9DfQ5",linhaSelecionada:"analises_linhaSelecionada__tDO4z",radarContainer:"analises_radarContainer__5HowQ",expandButton:"analises_expandButton__RMwou",expandIcon:"analises_expandIcon___dJnx",open:"analises_open__NHlmP"}},32384:(e,a,s)=>{"use strict";s.d(a,{A:()=>h});var i=s(95155),t=s(66766);let o={src:"/projeto-future//_next/static/media/logo3.bd6a4934.png",height:406,width:422,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEXf39/Ewr/27uT29vbt4ND559H469vHx8b6+/vS09TNzs/24MbVzcPfzrjt2sH+8+Xn5+f28uzm3dHIQYkHAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAAJHRFWHREZXNjcmlwdGlvbgBodHRwOi8vd3d3LnBkZi10b29scy5jb21fEmayAAAAE3RFWHRBdXRob3IAUERGIFRvb2xzIEFHG893MAAAABF0RVh0VGl0bGUAUERGIENyZWF0b3JBXrwoAAAAPklEQVR4nBXLRxLAIAwAsQWMC6Yk/P+xmegu2jOsGE4bq6cYsHp1FSOuZ1UdhGR9Wxoxj3fdBjG33AJOlL9/QIsBxf42TxwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8};var r=s(12115),n=s(35695),l=s(10351),c=s(6874),d=s.n(c);s(90226),s(17257);var m=s(41478);let u=e=>{let{className:a}=e,[s,o]=(0,r.useState)("Home"),[l,c]=(0,r.useState)(2700),d=(0,n.useRouter)(),u=(0,n.usePathname)();(0,r.useEffect)(()=>{let e=u.split("/").filter(Boolean),a=e.length?e[e.length-1]:"Home";o(a.charAt(0).toUpperCase()+a.slice(1))},[u]);let h=()=>{c(900)};return(0,r.useEffect)(()=>{let e=()=>{h()};return window.addEventListener("mousemove",e),window.addEventListener("keydown",e),window.addEventListener("click",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e),window.removeEventListener("click",e)}},[]),(0,r.useEffect)(()=>{l<=0&&(localStorage.clear(),d.push("/login"));let e=setInterval(()=>{c(e=>e-1)},1e3);return()=>clearInterval(e)},[l,d]),(0,i.jsx)("header",{className:"header ".concat(a||""),role:"banner",children:(0,i.jsxs)("div",{className:"header-content",children:[(0,i.jsxs)("div",{className:"logo-container",children:[(0,i.jsx)(t.default,{src:m.A,alt:"Logo",width:50,height:50}),(0,i.jsxs)("div",{className:"titulo",children:[(0,i.jsx)("div",{className:"titulo-1",children:(0,i.jsxs)("span",{className:"system-name",children:["FS",(0,i.jsx)("span",{className:"orange",children:"3"}),"M"]})}),(0,i.jsx)("span",{className:"system-subname",children:"Future Security Maturity Monitoring & Management"})]})]}),(0,i.jsx)("div",{className:"header-spacer"})]})})},h=e=>{let{menuItems:a}=e,[s,c]=(0,r.useState)(!1),[m,h]=(0,r.useState)({name:"",type:""}),x=(0,n.useRouter)(),j=(0,n.usePathname)();return(0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let a=JSON.parse(e);h({name:a.nome||"Usu\xe1rio",type:a.role||"Tipo n\xe3o definido"})}catch(e){console.error("Erro ao fazer parse do user no localStorage:",e)}},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u,{className:s?"collapsed-header":""}),(0,i.jsxs)("div",{className:"sidebar ".concat(s?"collapsed":""),role:"navigation","aria-label":"Menu lateral",children:[(0,i.jsx)("div",{className:"sidebar-header",children:(0,i.jsx)("button",{className:"menu-button",onClick:()=>c(!s),"aria-label":s?"Expandir menu":"Recolher menu","aria-expanded":!s,children:(0,i.jsx)(l.ND1,{size:24,"aria-hidden":"true"})})}),!s&&(0,i.jsxs)("div",{className:"user-section",children:[(0,i.jsx)(t.default,{src:o,alt:"Logo da Empresa",className:"user-avatar",width:60,height:60}),(0,i.jsx)("p",{className:"user-name",children:m.name}),(0,i.jsx)("p",{className:"user-type",children:m.type})]}),(0,i.jsx)("nav",{className:"menu-items",children:a.map((e,a)=>(0,i.jsxs)(d(),{href:e.path,className:"menu-link ".concat(j===e.path?"active":""),"aria-current":j===e.path?"page":void 0,children:[e.icon,!s&&(0,i.jsx)("span",{children:e.name})]},a))}),(0,i.jsx)("div",{className:"logout-section",children:(0,i.jsxs)("button",{className:"logout-button",onClick:()=>{localStorage.clear(),x.push("/login")},"aria-label":"Sair da conta",children:[(0,i.jsx)(l.QeK,{size:20,"aria-hidden":"true"}),!s&&(0,i.jsx)("span",{children:"Sair"})]})})]})]})}},41478:(e,a,s)=>{"use strict";s.d(a,{A:()=>i});let i={src:"/projeto-future//_next/static/media/f3smlogo.15dc6b4d.png",height:1e3,width:1e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEVMaXH0iR72kyv7lCX7mjP4kCT5lij5kiT3jyX7lSf2iSf3jyL5lCf3jB75qFH3n0P3jiL2jSH2kyv4nkD4sWT9lSbkcvktAAAAFXRSTlMAJR1q/eAs+FfMDWDwLdzKqK+wvvt+FaB6AAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAPklEQVR4nC3LWQ6AMAhAwVcLpWg3F+5/VRPj/wyw12MD6GpiFXC/5miJLsPijkyxR2JFBpd5uiUo2vTDf38BRd8B6retxQUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},44351:(e,a,s)=>{Promise.resolve().then(s.bind(s,77968))},77968:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var i=s(95155),t=s(12115),o=s(24328),r=s.n(o),n=s(32384),l=s(10351),c=s(90240);let d={GV:[{id:"GV.OC",subcategoria:"Contexto organizacional GV.OC"},{id:"GV.RM",subcategoria:"Estrat\xe9gia de gerenciamento de riscos GV.RM"},{id:"GV.RR",subcategoria:"Fun\xe7\xf5es, responsabilidades e autoridades GV.RR"},{id:"GV.PO",subcategoria:"Pol\xedtica GV.PO"},{id:"GV.OV",subcategoria:"Supervis\xe3o GV.OV"},{id:"GV.SC",subcategoria:"Seguran\xe7a cibern\xe9tica Gerenciamento de riscos da cadeia de suprimentos GV.SC"}],ID:[{id:"ID.AM",subcategoria:"Gest\xe3o de Ativos ID.AM"},{id:"ID.RA",subcategoria:"Avalia\xe7\xe3o de Risco ID.RA"},{id:"ID.IM",subcategoria:"Melhoria ID.IM"},{id:"ID.BE",subcategoria:"Comportamento da organiza\xe7\xe3o ID.BE"}],PR:[{id:"PR.AA",subcategoria:"Gerenciamento de Identidade, Autentica\xe7\xe3o e Controle de Acesso PR.AA"},{id:"PR.AT",subcategoria:"Conscientiza\xe7\xe3o e Treinamento PR.AT"},{id:"PR.DS",subcategoria:"Seguran\xe7a de Dados PR.DS"},{id:"PR.PS",subcategoria:"Seguran\xe7a de Plataforma PR.PS"},{id:"PR.IR",subcategoria:"Resili\xeancia da Infraestrutura Tecnol\xf3gica PR.IR"},{id:"PR.AC",subcategoria:"Gerenciamento de identidade, autentica\xe7\xe3o e controle de acesso PR.AC"},{id:"PR.IP",subcategoria:"Processos e procedimentos de prote\xe7\xe3o da informa\xe7\xe3o PR.IP"},{id:"PR.MA",subcategoria:"Manuten\xe7\xe3o PR.MA"},{id:"PR.PT",subcategoria:"Tecnologia de prote\xe7\xe3o PR.PT"}],DE:[{id:"DE.CM",subcategoria:"Monitoramento Cont\xednuo DE.CM"},{id:"DE.AE",subcategoria:"An\xe1lise de Eventos Adversos DE.AE"},{id:"DE.DP",subcategoria:"Processos de detec\xe7\xe3o DE.DP"}],RS:[{id:"RS.MA",subcategoria:"Gest\xe3o de Incidentes RS.MA"},{id:"RS.AN",subcategoria:"An\xe1lise de Incidentes RS.AN"},{id:"RS.CO",subcategoria:"Relat\xf3rio e Comunica\xe7\xe3o de Resposta a Incidentes RS.CO"},{id:"RS.MI",subcategoria:"Mitiga\xe7\xe3o de Incidentes RS.MI"},{id:"RS.RP",subcategoria:"Planejamento de resposta RS.RP"},{id:"RS.IM",subcategoria:"Melhorias RS.IM"}],RC:[{id:"RC.RP",subcategoria:"Execu\xe7\xe3o do Plano de Recupera\xe7\xe3o de Incidentes RC.RP"},{id:"RC.CO",subcategoria:"Comunica\xe7\xe3o de Recupera\xe7\xe3o de Incidentes RC.CO"},{id:"RC.IM",subcategoria:"Melhorias RC.IM"}]},m=e=>{let[a,s]=(0,t.useState)(null),[i,o]=(0,t.useState)(!0),[r,n]=(0,t.useState)(null),l=e=>e.reduce((e,a)=>(e.mediaTotal+=m(a.media),e.mediaPolitica+=m(a.politica),e.mediaPratica+=m(a.pratica),e),{mediaTotal:0,mediaPolitica:0,mediaPratica:0}),m=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=Number(e);return isNaN(s)?a:s};return(0,t.useEffect)(()=>{(async()=>{try{if(o(!0),!e)throw Error("ID do formul\xe1rio n\xe3o fornecido");let a=localStorage.getItem("token");if(!a)throw Error("Token de autentica\xe7\xe3o n\xe3o encontrado");let i="".concat((0,c.$)(),"/maturity-results/maturity-results/").concat(e,"/"),t=await fetch(i,{headers:{Authorization:"Bearer ".concat(a)}});if(!t.ok)throw Error("Erro na requisi\xe7\xe3o: ".concat(t.status));let r=await t.json();console.log("responseData",r);let n=r.formulario.id;console.log("formuarioEmAnaliseId",n),localStorage.setItem("formularioEmAnaliseId",n);let u=r.formulario.cliente;localStorage.setItem("cliente_formulario_analise_id",u.id),console.log("cliente",u);let h=Object.values(r.funcoes);if(0===h.length)throw Error("Nenhuma fun\xe7\xe3o encontrada ou formato inv\xe1lido");let x=[],j={},p=l(h);h.forEach(e=>{x.push({categoria:e.nome,sigla:e.sigla,media:m(e.media),politica:m(e.politica),pratica:m(e.pratica),objetivo:m(e.objetivo,3),status:e.status||"N\xe3o Avaliado",tipo:"CATEGORIA",subcategorias:e.categorias||[]}),e.categorias.forEach(e=>{let a=e.sigla,s=function(e){for(let a in d){let s=d[a].find(a=>a.id===e);if(s)return s.subcategoria}return"".concat(e,"nao achei")}(a)||e.sigla;j[a]||(j[a]=[]),j[a].push({id:e.sigla,subcategoria:s,politica:m(e.politica),pratica:m(e.pratica),objetivo:m(e.objetivo,3),perguntas:e.subcategorias||[]})})});let g={categorias:x,subcategorias:j,mediaEmpresa:{mediaTotal:parseFloat((p.mediaTotal/h.length).toFixed(2)),mediaPolitica:parseFloat((p.mediaPolitica/h.length).toFixed(2)),mediaPratica:parseFloat((p.mediaPratica/h.length).toFixed(2))}};console.log("processedData",g),s(g)}catch(e){console.error("Erro ao buscar dados:",e),n(e instanceof Error?e.message:"Erro desconhecido"),s(null)}finally{o(!1)}})()},[e]),{data:a,loading:i,error:r}};var u=s(23464);let h="".concat((0,c.$)(),"/recommendations/recomendacoes/"),x=()=>{let e=localStorage.getItem("token");return{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}},j=()=>{let[e,a]=(0,t.useState)([]),[s,i]=(0,t.useState)(!1),[o,r]=(0,t.useState)(null),n=(JSON.parse(localStorage.getItem("user")||"{}"),localStorage.getItem("formularioEmAnaliseId")),l=JSON.parse(localStorage.getItem("cliente_formulario_analise_id")||"{}"),c=async()=>{if(l&&n){i(!0);try{let e=await u.A.get("".concat(h).concat(l,"/").concat(n,"/"),x());a(e.data),r(null)}catch(a){var e,s;console.error("Erro ao buscar recomenda\xe7\xf5es:",a),r((null===(s=a.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.detail)||a.message||"Erro ao buscar recomenda\xe7\xf5es")}finally{i(!1)}}},d=async e=>{var a,s,t;try{i(!0),alert("Ainda nao implemntado no backend");return}catch(i){console.error("Erro ao adicionar recomenda\xe7\xe3o:",i);let e=(null===(s=i.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.detail)||Object.values((null===(t=i.response)||void 0===t?void 0:t.data)||{}).join("\n")||"Erro ao adicionar recomenda\xe7\xe3o";throw r(e),Error(e)}finally{i(!1)}},m=async(e,s)=>{try{i(!0);let t=await u.A.patch("".concat(h).concat(e,"/"),s,x());return a(a=>a.map(a=>a.id===e?t.data:a)),t.data}catch(a){var t,o,n;console.error("Erro ao atualizar recomenda\xe7\xe3o:",a);let e=(null===(o=a.response)||void 0===o?void 0:null===(t=o.data)||void 0===t?void 0:t.detail)||Object.values((null===(n=a.response)||void 0===n?void 0:n.data)||{}).join("\n")||"Erro ao atualizar recomenda\xe7\xe3o";throw r(e),Error(e)}finally{i(!1)}},j=async e=>{try{i(!0),await u.A.delete("".concat(h).concat(e,"/"),x()),a(a=>a.filter(a=>a.id!==e))}catch(e){var s,t;throw console.error("Erro ao remover recomenda\xe7\xe3o:",e),r((null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.detail)||e.message||"Erro ao remover recomenda\xe7\xe3o"),e}finally{i(!1)}},p=async(e,s)=>{try{i(!0);let t=new FormData;t.append("cumprida","true"),t.append("data_cumprimento",new Date().toISOString()),s&&t.append("comprovante",s);let o={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"multipart/form-data"}},r=await u.A.patch("".concat(h).concat(e,"/"),t,o);return a(a=>a.map(a=>a.id===e?r.data:a)),r.data}catch(e){var t,o;throw console.error("Erro ao marcar como conclu\xedda:",e),r((null===(o=e.response)||void 0===o?void 0:null===(t=o.data)||void 0===t?void 0:t.detail)||e.message||"Erro ao marcar como conclu\xedda"),e}finally{i(!1)}};return(0,t.useEffect)(()=>{c()},[l,n]),{recomendacoes:e,loading:s,error:o,fetchRecomendacoes:c,adicionarRecomendacao:d,atualizarRecomendacao:m,removerRecomendacao:j,marcarComoConcluida:p}},p=()=>{let{data:e,loading:a,error:s}=m(Number(localStorage.getItem("formularioRespondidoId")));if(a)return(0,i.jsx)("div",{className:"nist-loading",children:"Carregando..."});if(s)return(0,i.jsx)("div",{className:"nist-error",children:s});if(!e)return(0,i.jsx)("div",{className:"nist-no-data",children:"Nenhum dado dispon\xedvel"});let t=e=>null==e?"":e>=5?"score-excellent":e>=4?"score-good":e>=3?"score-ok":e>=2?"score-low":"score-critical",o=function(a,s,o){var r,n,l,c;let d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=null===(r=e.subcategorias[s])||void 0===r?void 0:r[0];return(0,i.jsxs)("tr",{"data-category":a,children:[d&&(0,i.jsx)("td",{className:"category-cell",rowSpan:m,children:a}),(0,i.jsx)("td",{children:o}),(0,i.jsx)("td",{className:"text-center",children:null==u?void 0:null===(n=u.objetivo)||void 0===n?void 0:n.toFixed(2)}),(0,i.jsx)("td",{className:"text-center ".concat(t(null==u?void 0:u.politica)),children:(null==u?void 0:null===(l=u.politica)||void 0===l?void 0:l.toFixed(2))||"-"}),(0,i.jsx)("td",{className:"text-center ".concat(t(null==u?void 0:u.pratica)),children:(null==u?void 0:null===(c=u.pratica)||void 0===c?void 0:c.toFixed(2))||"-"})]})};return(0,i.jsxs)("div",{className:"nist-csf-container",children:[(0,i.jsx)("p",{className:"nist-csf-title",children:"NIST CSF Vers\xe3o 2.0"}),(0,i.jsx)("div",{className:"table-container-nist",children:(0,i.jsxs)("table",{className:"nist-csf-table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{}),(0,i.jsx)("th",{children:"Overall"}),(0,i.jsx)("th",{children:"Objetivo"}),(0,i.jsx)("th",{children:"Pol\xedtica"}),(0,i.jsx)("th",{children:"Pr\xe1tica"})]})}),(0,i.jsxs)("tbody",{children:[o("GV","GV.OC","Contexto organizacional GV.OC",!0,6),o("GV","GV.RM","Estrat\xe9gia de gerenciamento de riscos GV.RM"),o("GV","GV.RR","Pap\xe9is, Responsabilidades e Autoridades GV.RR"),o("GV","GV.PO","Pol\xedtica GV.PO"),o("GV","GV.OV","Fiscaliza\xe7\xe3o GV.OV"),o("GV","GV.SC","Gest\xe3o de Riscos da Cadeia de Suprimentos de Ciberseguran\xe7a GV.SC"),o("ID","ID.AM","Gest\xe3o de Ativos ID.AM",!0,3),o("ID","ID.RA","Avalia\xe7\xe3o de Risco ID.RA"),o("ID","ID.IM","Melhoria ID.IM"),o("PR","PR.AA","Gerenciamento de Identidade, Autentica\xe7\xe3o e Controle de Acesso PR.AA",!0,5),o("PR","PR.AT","Conscientiza\xe7\xe3o e Treinamento PR.AT"),o("PR","PR.DS","Seguran\xe7a de Dados PR.DS"),o("PR","PR.PS","Seguran\xe7a de Plataforma PR.PS"),o("PR","PR.IR","Resili\xeancia da Infraestrutura Tecnol\xf3gica PR.IR"),o("DE","DE.CM","Monitoramento cont\xednuo DE.CM",!0,2),o("DE","DE.AE","An\xe1lise de eventos adversos DE.AE"),o("RS","RS.MA","Gerenciamento de incidentes RS.MA",!0,4),o("RS","RS.AN","An\xe1lise de incidentes RS.AN"),o("RS","RS.CO","Comunica\xe7\xe3o e relat\xf3rios de resposta a incidentes RS.CO"),o("RS","RS.MI","Mitiga\xe7\xe3o de incidentes RS.MI"),o("RC","RC.RP","Execu\xe7\xe3o do plano de recupera\xe7\xe3o de incidentes RC.RP",!0,2),o("RC","RC.CO","Comunica\xe7\xe3o de recupera\xe7\xe3o de incidentes RC.CO")]}),(0,i.jsx)("tfoot",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{colSpan:3,className:"text-center",children:(0,i.jsx)("strong",{children:"M\xe9dia Total"})}),(0,i.jsx)("td",{className:"text-center",children:(0,i.jsx)("strong",{children:e.mediaEmpresa.mediaPolitica})}),(0,i.jsx)("td",{className:"text-center",children:(0,i.jsx)("strong",{children:e.mediaEmpresa.mediaPratica})})]})})]})})]})};var g=s(83540),v=s(73809),f=s(68238),b=s(11832),A=s(57313),N=s(89473),R=s(94517),S=s(40239);let P=()=>{let{data:e,loading:a,error:s}=m(Number(localStorage.getItem("formularioRespondidoId")));if(a||s||!e)return null;let t=Object.entries(e.subcategorias).flatMap(e=>{let[a,s]=e;return s.map(e=>{var s,i,t;return{categoria:a,nome:e.subcategoria,politica:null!==(s=e.politica)&&void 0!==s?s:0,pratica:null!==(i=e.pratica)&&void 0!==i?i:0,objetivo:null!==(t=e.objetivo)&&void 0!==t?t:0}})});return e.categorias.map(a=>({sigla:a.sigla,nome:a.categoria,subcategorias:e.subcategorias[a.sigla]||[]})),(0,i.jsxs)("div",{className:"radar-nist-container p-4 bg-white shadow rounded-md max-w-4xl mx-auto",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-center mb-4",children:"Radar NIST CSF"}),(0,i.jsx)(g.u,{width:"100%",height:600,children:(0,i.jsxs)(v.V,{outerRadius:180,data:t,children:[(0,i.jsx)(f.z,{}),(0,i.jsx)(b.r,{dataKey:"nome",tick:{fontSize:10},stroke:"#333"}),(0,i.jsx)(A.E,{angle:90,domain:[0,5],tickCount:6}),(0,i.jsx)(N.V,{name:"Pol\xedtica",dataKey:"politica",stroke:"#1f77b4",fill:"#1f77b4",fillOpacity:.2}),(0,i.jsx)(N.V,{name:"Pr\xe1tica",dataKey:"pratica",stroke:"#8e44ad",fill:"#8e44ad",fillOpacity:.2}),(0,i.jsx)(N.V,{name:"Objetivo",dataKey:"objetivo",stroke:"#2ca02c",fill:"#2ca02c",fillOpacity:.1,strokeWidth:2}),(0,i.jsx)(R.m,{}),(0,i.jsx)(S.s,{verticalAlign:"top"})]})})]})},I=e=>{let{formData:a,onChange:s,onSubmit:t,subcategorias:o}=e,r=["1","2","3","4","5"],n=a.categoria&&(null==o?void 0:o[a.categoria])?o[a.categoria].map(e=>e.sigla||e.id):[];return(0,i.jsxs)("form",{onSubmit:t,className:"form-recomendacao",children:[(0,i.jsx)("h1",{className:"form-titulo",children:"Nome do Projeto"}),(0,i.jsx)("input",{type:"text",name:"nome",placeholder:"Ex: Criptografia e Prote\xe7\xe3o de Dados",value:a.nome,onChange:s,required:!0,className:"form-input-nome"}),(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Categoria"}),(0,i.jsxs)("select",{name:"categoria",value:a.categoria,onChange:s,required:!0,className:"form-input",children:[(0,i.jsx)("option",{value:"",children:"Selecione a categoria"}),["Governan\xe7a","Identifica\xe7\xe3o","Prote\xe7\xe3o","Detec\xe7\xe3o","Resposta","Recupera\xe7\xe3o"].map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"NIST"}),(0,i.jsx)("input",{type:"text",name:"nist",list:"nist-options",value:a.nist,onChange:s,required:!0,className:"form-input",placeholder:"EX. GV.RM"}),(0,i.jsx)("datalist",{id:"nist-options",children:n.map(e=>(0,i.jsx)("option",{value:e},e))})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Tecnologia e Fabricante"}),(0,i.jsx)("input",{type:"text",name:"tecnologia",placeholder:"Ex: Agn\xf3stico",value:a.tecnologia,onChange:s,className:"form-input"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Prioridade"}),(0,i.jsxs)("select",{name:"prioridade",value:a.prioridade,onChange:s,className:"form-input",children:[(0,i.jsx)("option",{value:"baixa",children:"Baixa"}),(0,i.jsx)("option",{value:"media",children:"M\xe9dia"}),(0,i.jsx)("option",{value:"alta",children:"Alta"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Impacto"}),(0,i.jsxs)("select",{name:"impacto",value:a.impacto,onChange:s,className:"form-input",children:[(0,i.jsx)("option",{value:"",children:"Selecione o impacto"}),r.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Gravidade"}),(0,i.jsxs)("select",{name:"gravidade",value:a.gravidade,onChange:s,className:"form-input",children:[(0,i.jsx)("option",{value:"",children:"Selecione a gravidade"}),r.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Data In\xedcio"}),(0,i.jsx)("input",{type:"date",name:"data_inicio",value:a.data_inicio,onChange:s,className:"form-input"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Data Fim"}),(0,i.jsx)("input",{type:"date",name:"data_fim",value:a.data_fim,onChange:s,className:"form-input"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"meses"}),(0,i.jsx)("input",{type:"text",name:"meses",placeholder:"Ex: 6",value:a.meses,onChange:s,required:!0,className:"form-input"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Respons\xe1vel"}),(0,i.jsx)("input",{type:"text",name:"responsavel",placeholder:"Ex: TI/SI",value:a.responsavel,onChange:s,required:!0,className:"form-input"})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Investimentos previstos"}),(0,i.jsx)("input",{type:"text",name:"investimentos",placeholder:"Ex: R$500,00",value:a.investimentos,onChange:s,required:!0,className:"form-input"})]})]}),(0,i.jsxs)("div",{className:"form-detalhes",children:[(0,i.jsx)("h2",{className:"form-titulo-secao",children:"Detalhes do projeto"}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("h2",{className:"form-subtitulo",children:"Descri\xe7\xe3o do projeto"}),(0,i.jsx)("textarea",{name:"detalhes",placeholder:"Detalhes do projeto",value:a.detalhes,onChange:s,className:"form-input"})]}),(0,i.jsxs)("div",{className:"form-textarea-group",children:[(0,i.jsx)("h3",{className:"form-subtitulo",children:"Riscos envolvidos"}),(0,i.jsx)("textarea",{name:"riscos",placeholder:"Riscos envolvidos",value:a.riscos,onChange:s,className:"form-textarea"})]}),(0,i.jsxs)("div",{className:"form-textarea-group",children:[(0,i.jsx)("h3",{className:"form-subtitulo",children:"Justificativa da recomenda\xe7\xe3o"}),(0,i.jsx)("textarea",{name:"justificativa",placeholder:"Justificativa da recomenda\xe7\xe3o",value:a.justificativa,onChange:s,className:"form-textarea"})]}),(0,i.jsxs)("div",{className:"form-textarea-group",children:[(0,i.jsx)("h3",{className:"form-subtitulo",children:"Observa\xe7\xf5es adicionais"}),(0,i.jsx)("textarea",{name:"observacoes",placeholder:"Observa\xe7\xf5es adicionais",value:a.observacoes,onChange:s,className:"form-textarea"})]})]}),(0,i.jsx)("button",{type:"submit",className:"form-botao",children:"Salvar Recomenda\xe7\xe3o"})]})},C=e=>{let{message:a,type:s="error",className:t="",onRetry:o}=e;return(0,i.jsx)("div",{className:"rounded-md p-4 ".concat({error:"bg-red-50 text-red-700",warning:"bg-yellow-50 text-yellow-700",info:"bg-blue-50 text-blue-700"}[s]," ").concat(t),children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)(l.eHT,{className:"h-5 w-5 ".concat({error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"}[s]),"aria-hidden":"true"})}),(0,i.jsxs)("div",{className:"ml-3 flex-1",children:[(0,i.jsx)("p",{className:"text-sm font-medium",children:a}),o&&(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("button",{type:"button",onClick:o,className:"rounded-md px-2 py-1 text-sm font-medium ".concat("error"===s?"text-red-800 hover:bg-red-100":"warning"===s?"text-yellow-800 hover:bg-yellow-100":"text-blue-800 hover:bg-blue-100"," focus:outline-none focus:ring-2 focus:ring-offset-2 ").concat("error"===s?"focus:ring-red-500":"warning"===s?"focus:ring-yellow-500":"focus:ring-blue-500"),children:"Tentar novamente"})})]})]})})},E=()=>(0,i.jsx)("div",{className:"spinner-overlay",children:(0,i.jsx)("div",{className:"spinner-content",children:(0,i.jsxs)("div",{className:"boxes",children:[(0,i.jsxs)("div",{className:"box",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]}),(0,i.jsxs)("div",{className:"box",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]}),(0,i.jsxs)("div",{className:"box",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]}),(0,i.jsxs)("div",{className:"box",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]})]})})});function _(e){let{empresaId:a}=e,[s,o]=(0,t.useState)(null),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)({}),[x,g]=(0,t.useState)({nome:"",categoria:"",tecnologia:"",nist:"",prioridade:"",responsavel:"",data_inicio:"",data_fim:"",detalhes:"",investimentos:"",riscos:"",justificativa:"",observacoes:"",impacto:"",gravidade:"",meses:"1"}),[v,f]=(0,t.useState)(Number(a)),{data:b,loading:A,error:N}=m(v),{recomendacoes:R,adicionarRecomendacao:S,removerRecomendacao:_}=j(),[y,w]=(0,t.useState)(!0),D=["GV","ID","PR","DE","RS","RC"],V=e=>{h(a=>({...a,[e]:!a[e]}))},M=e=>{let{name:a,value:s}=e.target;g(e=>({...e,[a]:s}))};(0,t.useEffect)(()=>{(null==b?void 0:b.subcategorias)?d(function(e){let a={};return Object.keys(e).forEach(s=>{let i=e[s][0],t=i.id.split(".")[0];a[t]||(a[t]=[]),a[t].push(i)}),a}(b.subcategorias)):d({})},[b]),(0,t.useEffect)(()=>{if(a){let e=Number(a);isNaN(e)||f(e)}},[a]);let G=async e=>{if(e.preventDefault(),!x.nome||!x.categoria||!x.nist){alert("Preencha os campos obrigat\xf3rios: Nome, Categoria e NIST");return}try{await S({...x,meses:x.meses}),g({nome:"",categoria:"",tecnologia:"",nist:"",prioridade:"",responsavel:"",data_inicio:"",data_fim:"",detalhes:"",investimentos:"",riscos:"",justificativa:"",observacoes:"",impacto:"",gravidade:"",meses:"1"}),o(null)}catch(e){console.error("Erro ao enviar recomenda\xe7\xe3o:",e)}};return A?(0,i.jsxs)("div",{className:"flex min-h-screen bg-gray-100 flex-1 flex main-content",children:[(0,i.jsx)(n.A,{menuItems:[{name:"Home",icon:(0,i.jsx)(l.V5Y,{size:20}),path:"/analista"},{name:"An\xe1lises",icon:(0,i.jsx)(l.vQY,{size:20}),path:"/analista/analises"},{name:"Relat\xf3rios",icon:(0,i.jsx)(l.jH2,{size:20}),path:"/analista/relatorios"}]}),(0,i.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,i.jsx)(E,{})})]}):N?(0,i.jsxs)("div",{className:"flex min-h-screen bg-gray-100 flex-1 flex main-content",children:[(0,i.jsx)(n.A,{menuItems:[{name:"Home",icon:(0,i.jsx)(l.V5Y,{size:20}),path:"/analista"},{name:"An\xe1lises",icon:(0,i.jsx)(l.vQY,{size:20}),path:"/analista/analises"},{name:"Relat\xf3rios",icon:(0,i.jsx)(l.jH2,{size:20}),path:"/analista/relatorios"}]}),(0,i.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,i.jsx)(C,{message:"Erro: ".concat(N),type:"error"})})]}):b?(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(n.A,{menuItems:[{name:"Home",icon:(0,i.jsx)(l.V5Y,{size:20}),path:"/analista"},{name:"An\xe1lises",icon:(0,i.jsx)(l.vQY,{size:20}),path:"/analista/analises"},{name:"Relat\xf3rios",icon:(0,i.jsx)(l.jH2,{size:20}),path:"/analista/relatorios"}]}),(0,i.jsx)("main",{className:" flex main-content ".concat(y?"sidebar-open":"sidebar-collapsed"),children:(0,i.jsxs)("div",{className:"container-avaliacao ",children:[(0,i.jsx)("div",{className:r().tituloPagina,children:(0,i.jsx)("h3",{children:"An\xe1lise de Cyberseguran\xe7a - CLIENTE TESTE"})}),(0,i.jsxs)("div",{className:"".concat(r().card," mb-6"),children:[(0,i.jsx)("h4",{className:r().tituloSecao,children:"An\xe1lise de Performance por Subcategoria"}),(0,i.jsxs)("div",{className:"h-[400px] flex items-center justify-center bg-gray-100 rounded-lg",children:[(0,i.jsx)("span",{children:"Visualiza\xe7\xe3o da performance de todas as subcategorias com base no framework NIST CSF"}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{className:"container mx-auto p-4",children:(0,i.jsxs)("div",{className:"graficos",children:[(0,i.jsx)(P,{}),(0,i.jsx)(p,{})]})})]})]}),(0,i.jsxs)("div",{className:"".concat(r().card," mb-6"),children:[(0,i.jsx)("h4",{className:r().tituloSecao,children:"Avalia\xe7\xe3o por Categorias"}),(0,i.jsx)("p",{className:"mb-4",children:"M\xe9dias de performance por categoria principal"}),(0,i.jsxs)("table",{className:r().tabelaestilo,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"Categoria"}),(0,i.jsx)("td",{children:"M\xe9dia"}),(0,i.jsx)("td",{children:"Pol\xedtica"}),(0,i.jsx)("td",{children:"Pratica"}),(0,i.jsx)("td",{children:"Objetivo"}),(0,i.jsx)("td",{children:"Status"})]})}),(0,i.jsx)("tbody",{children:b.categorias.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[e.categoria," (",e.sigla,")"]}),(0,i.jsx)("td",{children:e.media.toFixed(2)}),(0,i.jsx)("td",{children:e.politica.toFixed(2)}),(0,i.jsx)("td",{children:e.pratica.toFixed(2)}),(0,i.jsx)("td",{children:e.objetivo.toFixed(2)}),(0,i.jsx)("td",{children:e.status})]},e.sigla))})]})]}),Object.entries(c).sort((e,a)=>{let[s]=e,[i]=a;return D.indexOf(s)-D.indexOf(i)}).map(e=>{let[a,s]=e,o=b.categorias.find(e=>e.sigla===a);return o?(0,i.jsxs)("div",{className:"".concat(r().card," mb-6"),children:[(0,i.jsxs)("h4",{className:r().tituloSecao,children:[o.categoria," (",a,")"]}),(0,i.jsx)("h4",{className:"mb-4",children:"Avalia\xe7\xe3o detalhada das subcategorias"}),(0,i.jsxs)("table",{className:r().tabelaestilo,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"ID"}),(0,i.jsx)("td",{children:"Subcategoria"}),(0,i.jsx)("td",{children:"Pol\xedtica"}),(0,i.jsx)("td",{children:"Pr\xe1tica"}),(0,i.jsx)("td",{children:"Objetivo"})]})}),(0,i.jsx)("tbody",{children:Array.isArray(s)&&s.map(e=>(0,i.jsxs)(t.Fragment,{children:[(0,i.jsxs)("tr",{className:"cursor-pointer",onClick:()=>V(e.id),children:[(0,i.jsx)("td",{children:e.id}),(0,i.jsx)("td",{children:e.nome}),(0,i.jsx)("td",{children:e.politica.toFixed(2)}),(0,i.jsx)("td",{children:e.pratica.toFixed(2)}),(0,i.jsx)("td",{children:e.objetivo.toFixed(2)})]}),u[e.id]&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:5,children:(0,i.jsx)(I,{formData:x,onChange:M,onSubmit:G,subcategorias:s})})})]},e.id))})]})]},a):null})]})})]}):(0,i.jsxs)("div",{className:"flex min-h-screen bg-gray-100 flex-1 flex main-content",children:[(0,i.jsx)(n.A,{menuItems:[{name:"Home",icon:(0,i.jsx)(l.V5Y,{size:20}),path:"/analista"},{name:"An\xe1lises",icon:(0,i.jsx)(l.vQY,{size:20}),path:"/analista/analises"},{name:"Relat\xf3rios",icon:(0,i.jsx)(l.jH2,{size:20}),path:"/analista/relatorios"}]}),(0,i.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,i.jsx)(C,{message:"Nenhum dado dispon\xedvel",type:"info"})})]})}function y(){let[e,a]=(0,t.useState)(null);if((0,t.useEffect)(()=>{let e=localStorage.getItem("formularioRespondidoId");e&&!isNaN(Number(e))?a(Number(e)):console.warn("ID inv\xe1lido")},[]),null!==e)return n.A,l.V5Y,l.vQY,l.jH2,(0,i.jsx)(_,{empresaId:e.toString()})}},90226:()=>{},90240:(e,a,s)=>{"use strict";s.d(a,{$:()=>t});var i=s(49509);let t=()=>i.env.NEXT_PUBLIC_API_URL||"https://projeto-future-backend.onrender.com/"}},e=>{var a=a=>e(e.s=a);e.O(0,[156,844,733,874,464,115,441,684,358],()=>a(44351)),_N_E=e.O()}]);