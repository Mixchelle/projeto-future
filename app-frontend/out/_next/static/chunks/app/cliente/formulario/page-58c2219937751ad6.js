(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[880],{15951:(e,a,t)=>{"use strict";t.d(a,{y:()=>n});var r=t(12115),o=t(23464),s=t(90240);let l="".concat((0,s.$)(),"/form"),n=()=>{let[e,a]=(0,r.useState)([]),[t,s]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)([]),[A,h]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null),[p,v]=(0,r.useState)([]),[x,j]=(0,r.useState)(!1),[S,w]=(0,r.useState)(null),b=()=>{let e=localStorage.getItem("token");return{headers:{Authorization:"Bearer ".concat(e)}}};async function E(){try{let e=await o.A.get("".concat(l,"/formularios/"),b());a(e.data),e.data.forEach(e=>{localStorage.setItem("formulario_".concat(e.id,"_total"),e.total.toString())})}catch(e){console.error("Erro ao buscar formul\xe1rios:",e)}}let N=async e=>{try{let a=await o.A.get("".concat(l,"/formularios/").concat(e,"/categorias/"),b());s(a.data)}catch(e){console.error("Erro ao buscar categorias:",e)}},y=async e=>{try{let a=await o.A.get("".concat(l,"/categorias/").concat(e,"/perguntas/"),b());i(a.data)}catch(e){console.error("Erro ao buscar quest\xf5es:",e)}},I=async(e,a)=>{try{var t;let e=localStorage.getItem("selectedFormularioId"),a=JSON.parse(localStorage.getItem("user")||"{}").id,r=await o.A.get("".concat(l,"/formularios/").concat(e,"/clientes/").concat(a,"/"),b()),s=JSON.parse(localStorage.getItem("formulariosRespondidos")||"{}");return s[e]={nome:null===(t=r.data.formulario)||void 0===t?void 0:t.nome,status:r.data.status,data:new Date().toISOString()},localStorage.setItem("formulariosRespondidos",JSON.stringify(s)),d(r.data),r.data}catch(e){return console.error("Erro ao buscar formul\xe1rio respondido:",e),null}},R=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rascunho";try{let t=localStorage.getItem("selectedFormularioId"),r=JSON.parse(localStorage.getItem("user")||"{}"),s=r.id,n={formulario:t,cliente:s,responsavel:r.id,status:a,respostas:e.map(e=>({pergunta:e.pergunta,politica:e.politica,pratica:e.pratica,info_complementar:e.info_complementar||"",anexos:e.anexos||null}))},i=await o.A.post("".concat(l,"/formularios/").concat(t,"/clientes/").concat(s,"/"),n,b());return await I(Number(t),s),i.data}catch(e){throw console.error("Erro ao salvar respostas:",e),e}},k=async(e,t)=>{try{let r=await o.A.patch("".concat(l,"/formularios/").concat(e,"/"),t,b());a(a=>a.map(a=>a.id===e?{...a,...r.data}:a))}catch(e){console.error("Erro ao atualizar formul\xe1rio:",e)}};(0,r.useEffect)(()=>{E()},[]);let _=async e=>{try{h(!0),f(null);let a=await o.A.get("".concat(l,"/clientes/").concat(e,"/formularios-em-andamento/"),b());m(a.data);let t=a.data.map(e=>({id:e.id,nome:e.formulario_nome,status:e.status,data:e.atualizado_em,progresso:e.progresso}));return localStorage.setItem("formulariosEmAndamento",JSON.stringify(t)),a.data}catch(e){throw console.error("Erro ao buscar formul\xe1rios em andamento:",e),f("Erro ao carregar formul\xe1rios em andamento"),e}finally{h(!1)}},B=async()=>{j(!0),w(null);try{let e=(await o.A.get("".concat(l,"/formularios-em-analise/"),b())).data,a=Object.entries(e).map(e=>{let[a,t]=e;return{id_formulario_respondido:parseInt(a),id_cliente:t.id_cliente,nome_cliente:t.nome_cliente,id_formulario:t.id_formulario,nome_formulario:t.nome_formulario}});return v(a),a}catch(e){return console.error("Erro ao buscar formul\xe1rios em an\xe1lise:",e),w("Erro ao carregar formul\xe1rios em an\xe1lise."),null}finally{j(!1)}};return(0,r.useEffect)(()=>{B()},[]),{formularios:e,categorias:t,perguntas:n,formularioRespondido:c,formulariosEmAnalise:p,loadingFormulariosEmAnalise:x,errorFormulariosEmAnalise:S,getFormularios:E,getCategoriasByFormulario:N,getQuestoesByCategoria:y,getFormularioRespondido:I,saveFormularioRespondido:R,updateFormularioById:k,getFormulariosEmAndamento:_,buscarFormulariosEmAnalise:B}}},17257:()=>{},32384:(e,a,t)=>{"use strict";t.d(a,{A:()=>A});var r=t(95155),o=t(66766);let s={src:"/projeto-future//_next/static/media/logo3.bd6a4934.png",height:406,width:422,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEXf39/Ewr/27uT29vbt4ND559H469vHx8b6+/vS09TNzs/24MbVzcPfzrjt2sH+8+Xn5+f28uzm3dHIQYkHAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAAJHRFWHREZXNjcmlwdGlvbgBodHRwOi8vd3d3LnBkZi10b29scy5jb21fEmayAAAAE3RFWHRBdXRob3IAUERGIFRvb2xzIEFHG893MAAAABF0RVh0VGl0bGUAUERGIENyZWF0b3JBXrwoAAAAPklEQVR4nBXLRxLAIAwAsQWMC6Yk/P+xmegu2jOsGE4bq6cYsHp1FSOuZ1UdhGR9Wxoxj3fdBjG33AJOlL9/QIsBxf42TxwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8};var l=t(12115),n=t(35695),i=t(10351),c=t(6874),d=t.n(c);t(90226),t(17257);var u=t(41478);let m=e=>{let{className:a}=e,[t,s]=(0,l.useState)("Home"),[i,c]=(0,l.useState)(2700),d=(0,n.useRouter)(),m=(0,n.usePathname)();(0,l.useEffect)(()=>{let e=m.split("/").filter(Boolean),a=e.length?e[e.length-1]:"Home";s(a.charAt(0).toUpperCase()+a.slice(1))},[m]);let A=()=>{c(900)};return(0,l.useEffect)(()=>{let e=()=>{A()};return window.addEventListener("mousemove",e),window.addEventListener("keydown",e),window.addEventListener("click",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e),window.removeEventListener("click",e)}},[]),(0,l.useEffect)(()=>{i<=0&&(localStorage.clear(),d.push("/login"));let e=setInterval(()=>{c(e=>e-1)},1e3);return()=>clearInterval(e)},[i,d]),(0,r.jsx)("header",{className:"header ".concat(a||""),role:"banner",children:(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"logo-container",children:[(0,r.jsx)(o.default,{src:u.A,alt:"Logo",width:50,height:50}),(0,r.jsxs)("div",{className:"titulo",children:[(0,r.jsx)("div",{className:"titulo-1",children:(0,r.jsxs)("span",{className:"system-name",children:["FS",(0,r.jsx)("span",{className:"orange",children:"3"}),"M"]})}),(0,r.jsx)("span",{className:"system-subname",children:"Future Security Maturity Monitoring & Management"})]})]}),(0,r.jsx)("div",{className:"header-spacer"})]})})},A=e=>{let{menuItems:a}=e,[t,c]=(0,l.useState)(!1),[u,A]=(0,l.useState)({name:"",type:""}),h=(0,n.useRouter)(),g=(0,n.usePathname)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let a=JSON.parse(e);A({name:a.nome||"Usu\xe1rio",type:a.role||"Tipo n\xe3o definido"})}catch(e){console.error("Erro ao fazer parse do user no localStorage:",e)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{className:t?"collapsed-header":""}),(0,r.jsxs)("div",{className:"sidebar ".concat(t?"collapsed":""),role:"navigation","aria-label":"Menu lateral",children:[(0,r.jsx)("div",{className:"sidebar-header",children:(0,r.jsx)("button",{className:"menu-button",onClick:()=>c(!t),"aria-label":t?"Expandir menu":"Recolher menu","aria-expanded":!t,children:(0,r.jsx)(i.ND1,{size:24,"aria-hidden":"true"})})}),!t&&(0,r.jsxs)("div",{className:"user-section",children:[(0,r.jsx)(o.default,{src:s,alt:"Logo da Empresa",className:"user-avatar",width:60,height:60}),(0,r.jsx)("p",{className:"user-name",children:u.name}),(0,r.jsx)("p",{className:"user-type",children:u.type})]}),(0,r.jsx)("nav",{className:"menu-items",children:a.map((e,a)=>(0,r.jsxs)(d(),{href:e.path,className:"menu-link ".concat(g===e.path?"active":""),"aria-current":g===e.path?"page":void 0,children:[e.icon,!t&&(0,r.jsx)("span",{children:e.name})]},a))}),(0,r.jsx)("div",{className:"logout-section",children:(0,r.jsxs)("button",{className:"logout-button",onClick:()=>{localStorage.clear(),h.push("/login")},"aria-label":"Sair da conta",children:[(0,r.jsx)(i.QeK,{size:20,"aria-hidden":"true"}),!t&&(0,r.jsx)("span",{children:"Sair"})]})})]})]})}},41478:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r={src:"/projeto-future//_next/static/media/f3smlogo.15dc6b4d.png",height:1e3,width:1e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEVMaXH0iR72kyv7lCX7mjP4kCT5lij5kiT3jyX7lSf2iSf3jyL5lCf3jB75qFH3n0P3jiL2jSH2kyv4nkD4sWT9lSbkcvktAAAAFXRSTlMAJR1q/eAs+FfMDWDwLdzKqK+wvvt+FaB6AAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAPklEQVR4nC3LWQ6AMAhAwVcLpWg3F+5/VRPj/wyw12MD6GpiFXC/5miJLsPijkyxR2JFBpd5uiUo2vTDf38BRd8B6retxQUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},46586:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(95155),o=t(12115),s=t(32384),l=t(10351),n=t(35695),i=t(15951);function c(){let[e,a]=(0,o.useState)(!0),t=(0,n.useRouter)(),{formularios:c,getFormularios:d}=(0,i.y)();(0,o.useEffect)(()=>{d()},[]);let u=e=>{localStorage.setItem("selectedFormularioId",e.id.toString()),localStorage.setItem("nomefomulario",e.nome.toString());let a=e.nome.toLowerCase().split(" ")[0];t.push("/cliente/formulario/".concat(a))};return(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsx)(s.A,{menuItems:[{name:"Home",icon:(0,r.jsx)(l.V5Y,{size:20}),path:"/cliente"},{name:"Formulario",icon:(0,r.jsx)(l.jH2,{size:20}),path:"/cliente/formulario"}]}),(0,r.jsx)("div",{className:"fundo flex-1 flex flex-col transition-all duration-300 main-content ".concat(e?"":"collapsed"),children:(0,r.jsx)("main",{className:"flex-1 p-6 overflow-auto",children:(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>(0,r.jsx)("div",{className:"cardForm bg-orange-500 text-white p-4 rounded-lg shadow-md cursor-pointer hover:bg-orange-600 transition",onClick:()=>u(e),children:(0,r.jsx)("h2",{className:"text-lg font-semibold",children:e.nome})},e.id))})})})]})}},72635:(e,a,t)=>{Promise.resolve().then(t.bind(t,46586))},90226:()=>{},90240:(e,a,t)=>{"use strict";t.d(a,{$:()=>o});var r=t(49509);let o=()=>r.env.NEXT_PUBLIC_API_URL||"https://projeto-future-backend.onrender.com/"}},e=>{var a=a=>e(e.s=a);e.O(0,[156,844,733,874,464,441,684,358],()=>a(72635)),_N_E=e.O()}]);