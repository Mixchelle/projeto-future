(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{13181:(e,a,t)=>{Promise.resolve().then(t.bind(t,48701))},15951:(e,a,t)=>{"use strict";t.d(a,{y:()=>n});var r=t(12115),s=t(23464),o=t(90240);let l="".concat((0,o.$)(),"/form"),n=()=>{let[e,a]=(0,r.useState)([]),[t,o]=(0,r.useState)([]),[n,c]=(0,r.useState)([]),[i,u]=(0,r.useState)(null),[m,d]=(0,r.useState)([]),[h,A]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[p,x]=(0,r.useState)([]),[j,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),N=()=>{let e=localStorage.getItem("token");return{headers:{Authorization:"Bearer ".concat(e)}}};async function S(){try{let e=await s.A.get("".concat(l,"/formularios/"),N());a(e.data),e.data.forEach(e=>{localStorage.setItem("formulario_".concat(e.id,"_total"),e.total.toString())})}catch(e){console.error("Erro ao buscar formul\xe1rios:",e)}}let E=async e=>{try{let a=await s.A.get("".concat(l,"/formularios/").concat(e,"/categorias/"),N());o(a.data)}catch(e){console.error("Erro ao buscar categorias:",e)}},y=async e=>{try{let a=await s.A.get("".concat(l,"/categorias/").concat(e,"/perguntas/"),N());c(a.data)}catch(e){console.error("Erro ao buscar quest\xf5es:",e)}},I=async(e,a)=>{try{var t;let e=localStorage.getItem("selectedFormularioId"),a=JSON.parse(localStorage.getItem("user")||"{}").id,r=await s.A.get("".concat(l,"/formularios/").concat(e,"/clientes/").concat(a,"/"),N()),o=JSON.parse(localStorage.getItem("formulariosRespondidos")||"{}");return o[e]={nome:null===(t=r.data.formulario)||void 0===t?void 0:t.nome,status:r.data.status,data:new Date().toISOString()},localStorage.setItem("formulariosRespondidos",JSON.stringify(o)),u(r.data),r.data}catch(e){return console.error("Erro ao buscar formul\xe1rio respondido:",e),null}},k=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rascunho";try{let t=localStorage.getItem("selectedFormularioId"),r=JSON.parse(localStorage.getItem("user")||"{}"),o=r.id,n={formulario:t,cliente:o,responsavel:r.id,status:a,respostas:e.map(e=>({pergunta:e.pergunta,politica:e.politica,pratica:e.pratica,info_complementar:e.info_complementar||"",anexos:e.anexos||null}))},c=await s.A.post("".concat(l,"/formularios/").concat(t,"/clientes/").concat(o,"/"),n,N());return await I(Number(t),o),c.data}catch(e){throw console.error("Erro ao salvar respostas:",e),e}},R=async(e,t)=>{try{let r=await s.A.patch("".concat(l,"/formularios/").concat(e,"/"),t,N());a(a=>a.map(a=>a.id===e?{...a,...r.data}:a))}catch(e){console.error("Erro ao atualizar formul\xe1rio:",e)}};(0,r.useEffect)(()=>{S()},[]);let _=async e=>{try{A(!0),g(null);let a=await s.A.get("".concat(l,"/clientes/").concat(e,"/formularios-em-andamento/"),N());d(a.data);let t=a.data.map(e=>({id:e.id,nome:e.formulario_nome,status:e.status,data:e.atualizado_em,progresso:e.progresso}));return localStorage.setItem("formulariosEmAndamento",JSON.stringify(t)),a.data}catch(e){throw console.error("Erro ao buscar formul\xe1rios em andamento:",e),g("Erro ao carregar formul\xe1rios em andamento"),e}finally{A(!1)}},L=async()=>{v(!0),w(null);try{let e=(await s.A.get("".concat(l,"/formularios-em-analise/"),N())).data,a=Object.entries(e).map(e=>{let[a,t]=e;return{id_formulario_respondido:parseInt(a),id_cliente:t.id_cliente,nome_cliente:t.nome_cliente,id_formulario:t.id_formulario,nome_formulario:t.nome_formulario}});return x(a),a}catch(e){return console.error("Erro ao buscar formul\xe1rios em an\xe1lise:",e),w("Erro ao carregar formul\xe1rios em an\xe1lise."),null}finally{v(!1)}};return(0,r.useEffect)(()=>{L()},[]),{formularios:e,categorias:t,perguntas:n,formularioRespondido:i,formulariosEmAnalise:p,loadingFormulariosEmAnalise:j,errorFormulariosEmAnalise:b,getFormularios:S,getCategoriasByFormulario:E,getQuestoesByCategoria:y,getFormularioRespondido:I,saveFormularioRespondido:k,updateFormularioById:R,getFormulariosEmAndamento:_,buscarFormulariosEmAnalise:L}}},17257:()=>{},18062:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(95155),s=t(12115),o=t(10351);function l(){let[e,a]=(0,s.useState)(!1),t=[{nome:"Instagram",icone:(0,r.jsx)(o.eCe,{size:18}),url:"https://www.instagram.com/futuretechbr/",cor:"#e1306c"},{nome:"YouTube",icone:(0,r.jsx)(o.blI,{size:18}),url:"https://www.youtube.com/channel/UCWajNYhJCLLm6efWmUKOjNg",cor:"#ff0000"},{nome:"Site",icone:(0,r.jsx)(o.VeH,{size:18}),url:"https://future.com.br/",cor:"#1e90ff"},{nome:"Facebook",icone:(0,r.jsx)(o.spH,{size:18}),url:"https://www.facebook.com/futureonface",cor:"#1877f2"},{nome:"LinkedIn",icone:(0,r.jsx)(o.Wjy,{size:18}),url:"https://www.linkedin.com/company/futuretechnologiesbr",cor:"#0a66c2"}];return(0,r.jsxs)("div",{className:"floating-menu",children:[(0,r.jsx)("button",{className:"floating-button",onClick:()=>a(!e),children:e?"\xd7":"+"}),e&&(0,r.jsxs)("div",{className:"social-menu",children:[(0,r.jsx)("div",{className:"menu-header",children:"Nossas Redes"}),(0,r.jsx)("ul",{className:"menu-list",children:t.map((e,a)=>(0,r.jsx)("li",{className:"menu-item",children:(0,r.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[(0,r.jsx)("span",{className:"icon-wrapper",style:{backgroundColor:e.cor},children:e.icone}),(0,r.jsx)("span",{className:"icon-label",children:e.nome})]})},a))})]})]})}},32384:(e,a,t)=>{"use strict";t.d(a,{A:()=>h});var r=t(95155),s=t(66766);let o={src:"/projeto-future//_next/static/media/logo3.bd6a4934.png",height:406,width:422,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEXf39/Ewr/27uT29vbt4ND559H469vHx8b6+/vS09TNzs/24MbVzcPfzrjt2sH+8+Xn5+f28uzm3dHIQYkHAAAACXBIWXMAAA7zAAAO8wEcU5k6AAAAJHRFWHREZXNjcmlwdGlvbgBodHRwOi8vd3d3LnBkZi10b29scy5jb21fEmayAAAAE3RFWHRBdXRob3IAUERGIFRvb2xzIEFHG893MAAAABF0RVh0VGl0bGUAUERGIENyZWF0b3JBXrwoAAAAPklEQVR4nBXLRxLAIAwAsQWMC6Yk/P+xmegu2jOsGE4bq6cYsHp1FSOuZ1UdhGR9Wxoxj3fdBjG33AJOlL9/QIsBxf42TxwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8};var l=t(12115),n=t(35695),c=t(10351),i=t(6874),u=t.n(i);t(90226),t(17257);var m=t(41478);let d=e=>{let{className:a}=e,[t,o]=(0,l.useState)("Home"),[c,i]=(0,l.useState)(2700),u=(0,n.useRouter)(),d=(0,n.usePathname)();(0,l.useEffect)(()=>{let e=d.split("/").filter(Boolean),a=e.length?e[e.length-1]:"Home";o(a.charAt(0).toUpperCase()+a.slice(1))},[d]);let h=()=>{i(900)};return(0,l.useEffect)(()=>{let e=()=>{h()};return window.addEventListener("mousemove",e),window.addEventListener("keydown",e),window.addEventListener("click",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e),window.removeEventListener("click",e)}},[]),(0,l.useEffect)(()=>{c<=0&&(localStorage.clear(),u.push("/login"));let e=setInterval(()=>{i(e=>e-1)},1e3);return()=>clearInterval(e)},[c,u]),(0,r.jsx)("header",{className:"header ".concat(a||""),role:"banner",children:(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"logo-container",children:[(0,r.jsx)(s.default,{src:m.A,alt:"Logo",width:50,height:50}),(0,r.jsxs)("div",{className:"titulo",children:[(0,r.jsx)("div",{className:"titulo-1",children:(0,r.jsxs)("span",{className:"system-name",children:["FS",(0,r.jsx)("span",{className:"orange",children:"3"}),"M"]})}),(0,r.jsx)("span",{className:"system-subname",children:"Future Security Maturity Monitoring & Management"})]})]}),(0,r.jsx)("div",{className:"header-spacer"})]})})},h=e=>{let{menuItems:a}=e,[t,i]=(0,l.useState)(!1),[m,h]=(0,l.useState)({name:"",type:""}),A=(0,n.useRouter)(),f=(0,n.usePathname)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(e)try{let a=JSON.parse(e);h({name:a.nome||"Usu\xe1rio",type:a.role||"Tipo n\xe3o definido"})}catch(e){console.error("Erro ao fazer parse do user no localStorage:",e)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{className:t?"collapsed-header":""}),(0,r.jsxs)("div",{className:"sidebar ".concat(t?"collapsed":""),role:"navigation","aria-label":"Menu lateral",children:[(0,r.jsx)("div",{className:"sidebar-header",children:(0,r.jsx)("button",{className:"menu-button",onClick:()=>i(!t),"aria-label":t?"Expandir menu":"Recolher menu","aria-expanded":!t,children:(0,r.jsx)(c.ND1,{size:24,"aria-hidden":"true"})})}),!t&&(0,r.jsxs)("div",{className:"user-section",children:[(0,r.jsx)(s.default,{src:o,alt:"Logo da Empresa",className:"user-avatar",width:60,height:60}),(0,r.jsx)("p",{className:"user-name",children:m.name}),(0,r.jsx)("p",{className:"user-type",children:m.type})]}),(0,r.jsx)("nav",{className:"menu-items",children:a.map((e,a)=>(0,r.jsxs)(u(),{href:e.path,className:"menu-link ".concat(f===e.path?"active":""),"aria-current":f===e.path?"page":void 0,children:[e.icon,!t&&(0,r.jsx)("span",{children:e.name})]},a))}),(0,r.jsx)("div",{className:"logout-section",children:(0,r.jsxs)("button",{className:"logout-button",onClick:()=>{localStorage.clear(),A.push("/login")},"aria-label":"Sair da conta",children:[(0,r.jsx)(c.QeK,{size:20,"aria-hidden":"true"}),!t&&(0,r.jsx)("span",{children:"Sair"})]})})]})]})}},41478:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r={src:"/projeto-future//_next/static/media/f3smlogo.15dc6b4d.png",height:1e3,width:1e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEVMaXH0iR72kyv7lCX7mjP4kCT5lij5kiT3jyX7lSf2iSf3jyL5lCf3jB75qFH3n0P3jiL2jSH2kyv4nkD4sWT9lSbkcvktAAAAFXRSTlMAJR1q/eAs+FfMDWDwLdzKqK+wvvt+FaB6AAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAPklEQVR4nC3LWQ6AMAhAwVcLpWg3F+5/VRPj/wyw12MD6GpiFXC/5miJLsPijkyxR2JFBpd5uiUo2vTDf38BRd8B6retxQUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},48701:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var r=t(95155),s=t(12115),o=t(32384),l=t(35695),n=t(10351),c=t(15951),i=t(18062);function u(){let[e,a]=(0,s.useState)(!0),[t,u]=(0,s.useState)({}),{formularios:m,getFormularioRespondido:d,getFormulariosEmAndamento:h}=(0,c.y)(),A=(0,l.useRouter)(),[f,g]=(0,s.useState)(null);(0,s.useEffect)(()=>{{let a=localStorage.getItem("user");if(a){var e;let t=JSON.parse(a);g("subcliente"===t.tipo?null===(e=t.cliente)||void 0===e?void 0:e.id:t.id)}}},[]),(0,s.useEffect)(()=>{u(JSON.parse(localStorage.getItem("formulariosEmAndamento")||"{}"))},[]),(0,s.useEffect)(()=>{null!==f&&d(1,f)},[1,f]),(0,s.useEffect)(()=>{null!==f&&(async()=>{await h(f),u(JSON.parse(localStorage.getItem("formulariosEmAndamento")||"{}"))})()},[f]);let p=e=>{if(!e||0===e.length){console.error("Nenhum formul\xe1rio recebido");return}let a=e[0];try{localStorage.setItem("selectedFormularioId",a.id.toString()),localStorage.setItem("nomeFormulario",a.nome);let e=a.nome.toLowerCase().split(" ")[0];A.push("/cliente/formulario/".concat(e))}catch(e){console.error("Erro ao processar formul\xe1rio:",e)}};return(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsx)(o.A,{menuItems:[{name:"Home",icon:(0,r.jsx)(n.V5Y,{size:20}),path:"/cliente"},{name:"Formulario",icon:(0,r.jsx)(n.jH2,{size:20}),path:"/cliente/formulario"}]}),(0,r.jsx)("div",{className:"fundo flex-1 flex flex-col transition-all duration-300 main-content ".concat(e?"":"collapsed"),children:(0,r.jsxs)("main",{className:"p-6 flex-1",children:[(0,r.jsxs)("div",{className:"transition-all duration-300 ".concat(e?"ml-[220px]":"ml-[80px]"),children:[(0,r.jsx)("div",{className:"titulo bg-white p-6 rounded-lg shadow-sm",children:(0,r.jsx)("h3",{children:" Aqui voc\xea pode acompanhar seus formul\xe1rios."})}),Object.keys(t).length>0&&(0,r.jsx)("div",{className:"card-cliente-form card mb-8",onClick:()=>p(t),children:Object.entries(t).map(e=>{let[a,t]=e;return(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-4 border-l-4 border-blue-500",children:(0,r.jsxs)("div",{className:"flex items-start",children:["aguardando_analise"===t.status?(0,r.jsx)(n.Ohp,{className:"text-yellow-500 text-xl mr-3 mt-1"}):(0,r.jsx)(n.A3x,{className:"text-green-500 text-xl mr-3 mt-1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:t.nome}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ",t.status]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Atualizado em: ",new Date(t.data).toLocaleDateString()]})]})]})},a)})})]}),(0,r.jsx)(i.A,{})]})})]})}},90226:()=>{},90240:(e,a,t)=>{"use strict";t.d(a,{$:()=>s});var r=t(49509);let s=()=>r.env.NEXT_PUBLIC_API_URL||"https://projeto-future-backend.onrender.com/"}},e=>{var a=a=>e(e.s=a);e.O(0,[156,844,733,874,464,441,684,358],()=>a(13181)),_N_E=e.O()}]);